---
openapi: 3.0.3
info:
  title: FMD
  description: A website for movies' and TV shows' reviews
  termsOfService: http://swagger.io/terms/
  contact:
    email: om.dehlantube@gmail.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 3.0.0
servers:
- url: https://virtserver.swaggerhub.com/VINAYTAYAL28/FMD_API3.0/3.0.0
  description: SwaggerHub API Auto Mocking
tags:
- name: Reviews
  description: Everything about reviews
- name: Titles
  description: Everything about shows or movies
- name: User
  description: Operations about user
paths:
  /search:
    get:
      description: Obtain the list of all movies that matches the expression
      parameters:
      - name: expression
        in: query
        description: the expression to be searched
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: inception
      - name: language
        in: query
        description: language of the movie
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: English
      responses:
        "200":
          description: Successful search
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        "404":
          description: Movie Not found
  /review:
    post:
      tags:
      - Reviews
      summary: Add a new post or review
      parameters:
      - name: title
        in: query
        description: the title of the show or movie to add the review
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: Joker
      - name: rating
        in: query
        description: rating by the user
        required: true
        style: form
        explode: true
        schema:
          maximum: 10
          minimum: 1
          type: integer
      - name: review title
        in: query
        description: the review title of the review to be added
        required: true
        style: form
        explode: true
        schema:
          maximum: 120
          type: string
          example: Joker
      - name: content
        in: query
        description: content of the review
        required: true
        style: form
        explode: true
        schema:
          maximum: 500
          type: string
      responses:
        "200":
          description: ok
  /Movies:
    get:
      tags:
      - Titles
      summary: Get movies by genre and sorting type
      parameters:
      - name: genre
        in: query
        description: Filter by genre (comma-separated list of values)
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: sort
        in: query
        description: 'Sort by type and order (format: type-order)'
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
        "400":
          description: Invalid request
        "404":
          description: No movies found
  /TVs:
    get:
      tags:
      - Titles
      summary: Get TV shows by genre and sorting type
      parameters:
      - name: genre
        in: query
        description: Filter by genre (comma-separated list of values)
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: sort
        in: query
        description: 'Sort by type and order (format: type-order)'
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Shows'
        "400":
          description: Invalid request
        "404":
          description: No TV shows found
  /users/signin:
    post:
      tags:
      - User
      summary: Sign in user with credentials
      parameters:
      - name: Username
        in: query
        description: Username
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: bobdylan
      - name: Password
        in: query
        description: Password
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: the_og_om
      responses:
        "200":
          description: User signed in successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: Bad request
        "401":
          description: Invalid credentials
        "500":
          description: Internal server error
  /users/signup:
    post:
      tags:
      - User
      summary: Create a new user account
      parameters:
      - name: Username
        in: query
        description: Username
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: bobdylan
      - name: Password
        in: query
        description: Password
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: the_og_om
      - name: Confirm Password
        in: query
        description: Confirm Password
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: the_og_om
      - name: interests
        in: query
        description: Filter by genre (comma-separated list of values)
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: bio
        in: query
        description: about user
        required: true
        style: form
        explode: true
        schema:
          maximum: 200
          type: string
          example: I am bobdylan. Hello world.
      responses:
        "200":
          description: User account created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: Bad request
        "409":
          description: User already exists
        "500":
          description: Internal server error
  /Reviews/{Title}:
    get:
      tags:
      - Reviews
      summary: Get all reviews of a title
      description: Returns a list of reviews for a particular title
      parameters:
      - name: Title
        in: path
        description: Title of the movie or TV show
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort order for the reviews. Use + for ascending order and - for descending order. Default is ascending order.
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - +rating
          - -rating
          - +date
          - -date
      responses:
        "200":
          description: List of reviews
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
        "400":
          description: Invalid request
        "404":
          description: Title not found
  /reviews/{review_id}/comments:
    post:
      tags:
      - Reviews
      summary: Add comment to review
      parameters:
      - name: review_id
        in: path
        description: ID of the review
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: comment
        in: query
        description: Comment to be added to review
        required: true
        style: form
        explode: true
        schema:
          $ref: '#/components/schemas/comment'
      responses:
        "201":
          description: Comment added successfully to review
        "400":
          description: Bad request. Invalid review ID or missing required fields
        "404":
          description: Review not found
  /reviews/{review_id}/likes:
    post:
      tags:
      - Reviews
      summary: Add like to review
      parameters:
      - name: review_id
        in: path
        description: ID of the review
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: user_id
        in: query
        description: ID of the user who likes the review
        required: true
        style: form
        explode: true
        schema:
          $ref: '#/components/schemas/user_id'
      responses:
        "201":
          description: Like added successfully to review
        "400":
          description: Bad request. Invalid review ID or missing required fields
        "404":
          description: Review not found
  /Title/{Title}:
    get:
      tags:
      - Titles
      summary: Get information about a title
      description: Returns information about a particular title, including its title, genre, director, actors, release date, and description.
      parameters:
      - name: Title
        in: path
        description: Name of the movie or book
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Information about the title
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Title'
        "400":
          description: Invalid request
        "404":
          description: Title not found
  /Reviews/{user_id}:
    get:
      tags:
      - Reviews
      summary: Get all reviews of a user
      description: Returns a list of reviews for a particular user
      parameters:
      - name: user_id
        in: path
        description: user id
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: sort
        in: query
        description: Sort order for the reviews. Use + for ascending order and - for descending order. Default is ascending order.
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - +rating
          - -rating
          - +date
          - -date
      responses:
        "200":
          description: List of reviews
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
        "400":
          description: Invalid request
        "404":
          description: Title not found
  /watchlist/{user_id}:
    get:
      tags:
      - User
      summary: Get all titles in user watchlist
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      responses:
        "200":
          description: List of titles in user watchlist
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        "400":
          description: Bad request. Invalid user ID
    post:
      tags:
      - User
      summary: Add a title to user watchlist
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: title
        in: query
        description: Title to be added to the watchlist
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "201":
          description: Title added successfully
        "400":
          description: Bad request. Invalid user ID or title not provided
  /watchlist/{user_id}/remove:
    put:
      tags:
      - User
      summary: Remove title from user's watchlist
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: title
        in: query
        description: Title to be removed from user's watchlist
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Title removed successfully from user's wishlist
        "400":
          description: Bad request. Invalid user ID or missing required fields
        "404":
          description: User not found or title not found in user's wishlist
  /profile/{user_id}/name:
    put:
      tags:
      - User
      summary: Update user name
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: name
        in: query
        description: New name of the user
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Name updated successfully
        "400":
          description: Bad request. Invalid user ID or missing required fields
        "404":
          description: User not found
  /profile/{user_id}/pic:
    put:
      tags:
      - User
      summary: Update user pic
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: pic
        in: query
        description: New pic
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: pic updated successfully
        "400":
          description: Bad request. Invalid user ID or missing required fields
        "404":
          description: User not found
  /profile/{user_id}/bio:
    put:
      tags:
      - User
      summary: Update user bio
      parameters:
      - name: user_id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      - name: address
        in: query
        description: New bio
        required: true
        style: form
        explode: true
        schema:
          maximum: 200
          type: string
      responses:
        "200":
          description: Address updated successfully
        "400":
          description: Bad request. Invalid user ID or missing required fields
        "404":
          description: User not found
components:
  schemas:
    Movie:
      type: object
      properties:
        title:
          type: string
          example: Inception
        year:
          type: integer
          example: 1999
        genre:
          type: string
          example: Thriller
        director:
          type: string
          example: Christopher Nolan
        writer:
          type: string
          example: Christopher Nolan
        cast:
          type: array
          example: {}
          items:
            type: string
        rating:
          type: number
          example: 8.3
        poster:
          type: string
    Shows:
      type: object
      properties:
        title:
          type: string
          example: Stranger Things season 3
        year:
          type: integer
          example: 1999
        genre:
          type: string
          example: Thriller
        director:
          type: string
          example: Christopher Nolan
        writer:
          type: string
          example: Christopher Nolan
        cast:
          type: array
          example: {}
          items:
            type: string
        rating:
          type: number
          example: 8.3
        poster:
          type: string
    Title:
      type: object
      properties:
        title:
          type: string
          example: Stranger Things season 3
        year:
          type: integer
          example: 1999
        genre:
          type: string
          example: Thriller
        director:
          type: string
          example: Christopher Nolan
        writer:
          type: string
          example: Christopher Nolan
        cast:
          type: array
          example: {}
          items:
            type: string
        rating:
          type: number
          example: 8.3
        poster:
          type: string
    Review:
      type: object
      properties:
        review_id:
          type: string
        movie_id:
          type: string
        user_id:
          type: string
        likes:
          type: integer
        rating:
          type: number
        review:
          type: string
    User:
      type: object
      properties:
        user_id:
          type: string
        name:
          type: string
        userpic:
          type: string
        bio:
          type: string
        interests:
          type: string
        watchlist:
          type: string
        created_at:
          type: string
    inline_response_200:
      type: object
      properties:
        token:
          type: string
        user:
          $ref: '#/components/schemas/User'
    comment:
      type: object
      properties:
        comment:
          type: string
        user_id:
          type: integer
    user_id:
      type: object
      properties:
        user_id:
          type: integer
